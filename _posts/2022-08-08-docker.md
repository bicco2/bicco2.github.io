---
layout: post
title:  "22-08-08-docker "
---

# Docker
 </br>

### 도커를 왜 쓸까?
- 기존의 가상머신보다 훨씬 가벼움
- 또한 가상머신처럼 독립된 실행환경을 만들어 준다.
- 가상머신 처럼 여러개의 운영체제에서 돌리지 않아 메모리 점유율, 성능면에서 이점이 있다.
- 가볍고 실행속도가 빠르고 배포가 쉽다.
- 허브를 통해 컨테이너 이미지 생성 및 공유가 가능

 </br>

<img src="https://i.ibb.co/f2c7P9g/Untitled.png" alt="Untitled" border="0" />

 </br>

도커 호스트 : app 실행 환경 제공 
도커 데몬 : (== 도커 서버) 도커 오브젝트 관리

도커 클라이언트 : 사용자가 도커와 상호작용 할 수 있게 하는 것 docker cli(커멘드)로 데몬에 전달 
주 목적은 직접 레지스트리에서 이미지를 받아 호스트에서 실행할 수 있게 하는 것임
 </br> 
 </br>
  </br>
### 도커 이미지란 ?
 </br>
- 서비스 운영에 필요한 서버 프로그램, 소스코드, 컴파일된 실행 파일을 묶은 형태
- 이미지는 설정값이 레이어로 진행되어 가장 많이 바뀌는 설정 값을 보통 아래 쪽에 둔다 .
- 두가지 방법 : 허브에서 pull 받아서 사용 or dockerfile 직접 작성 후 push
- 이미지는 비공개도 가능해 팀끼리만 공유할 수도 있고 퍼블릭으로 세계적 공유도 가능
 </br> 
 </br>
### 도커 컨테이너란?
 </br>
- 실행가능한 이미지의 인스턴스
- 하나의 이미지로 여러개의 컨테이너를 만들 수 있음
- 이미지 = 실행파일, 컨테이너 = 프로세스
- docker api를 통해 컨테이너를 crud 가능함

dockerfile : 컨테이너 활용을 좀 더 섬세하게 할 수 있도록 하는 파일 

나만의 이미지를 만드는 설계도임 

(서비스를 돌릴 때 마다 필요한 모듈들을 일일이 다운받아야하는 번거로움이 있기 때문에 이미지로 만들어 놓는다.)

>> 이게 또 하나하나 설정이긴 한데 다시 한 번 모아 놓은게 docker-compose.yml 이다. 

모든 docker 설정 파일을 한번에 돌릴 수 있도록 설정 해놓은 파일(docker 컨테이너 통합관리)

run 명령어는 이미지를 생성하는 과정에서 실행할 명령어임 

workdir 명령어는 이미지 내에서 명령어를 실행할 디렉토리 위치 설정하는 것 

cmd 명령어는 컨테이너 실행시 실행

env 생성된 컨테이너 안에 환경변수를 미리 지정한다. '

volume : 컨테이너와 특정 폴더를 공유하는 것을 말함 

즉, 컨테이너 실행될 때 외부의 것과 내부의 것을 연결하는 것을 말한다.
